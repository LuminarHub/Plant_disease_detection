{% extends 'base.html' %}
{% block title %}Crop Disease Prediction{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10 text-center">
  <h1 class="text-3xl font-semibold text-green-700 mb-6">ðŸŒ¿ Crop Disease Prediction</h1>
  <p class="text-gray-600 mb-8">
    Upload a crop image to predict possible diseases using our trained AI model.
  </p>

  <!-- Upload Form -->
  <div class="bg-white border border-gray-200 shadow-md rounded-2xl p-8">
    <form method="POST" enctype="multipart/form-data" class="space-y-5">
      {% csrf_token %}
      <input type="file" name="image" accept="image/*"
             class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-green-500" required>
      <div class="text-center">
        <button type="submit"
                class="bg-green-600 text-white px-8 py-2 rounded-lg hover:bg-green-700 transition">
          Predict
        </button>
      </div>
    </form>
  </div>

  <!-- Prediction Result -->
  {% if label %}
  <div class="mt-8 bg-gray-50 border border-gray-200 shadow-sm rounded-2xl p-6">
    <h2 class="text-xl font-semibold mb-2">Prediction Result</h2>
    <p class="text-lg font-medium">
      Disease:
      <span class="{% if 'Healthy' in label %}text-green-600{% else %}text-red-600{% endif %}">
        {{ label }}
      </span>
    </p>
    <p class="text-gray-600 mt-2">Confidence: {{ confidence|floatformat:2 }}%</p>
  </div>
  {% endif %}

  <!-- Uploaded Image -->
  {% if image_url %}
  <div class="mt-6">
    <h3 class="text-lg font-medium text-gray-700 mb-3">Uploaded Image</h3>
    <div class="inline-block border border-gray-200 rounded-xl overflow-hidden shadow-sm">
      <img src="{{ image_url }}" alt="Uploaded Image"
           class="w-64 h-64 object-contain rounded-lg">
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
